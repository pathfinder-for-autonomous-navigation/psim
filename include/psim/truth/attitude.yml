
name: Attitude
type: Model
comment: >
    Generic interface for an attitude simulation that's decoupled from the orbit
    propagator.

args:
    - prefix
    - satellite

params:
    - name: "{prefix}.{satellite}.J"
      type: Vector3
      comment: >
          Diagonal elements of the satellites moment of inertia matrix. We're
          assuming here that the off diagonal elements are small.
    - name: "{prefix}.{satellite}.wheels.J"
      type: Real
      comment: >
          Moment of inertia of a single reaction wheel on the satellite.
    - name: "{prefix}.{satellite}.wheels.w_max"
      type: Real
      comment: >
          Maximum angular rate a reaction wheel can spin at. Units are in
          radians per second.

adds:
    - name: "{prefix}.{satellite}.attitude.q.body_eci"
      type: Initialized Vector4
      comment: >
          Attitude of the spacecraft.
    - name: "{prefix}.{satellite}.attitude.w"
      type: Initialized Vector3
      comment: >
          Angular rate of the spacecraft in the body frame.
    - name: "{prefix}.{satellite}.wheels.t"
      type: Writable Vector3
      comment: >
          Torque commanded of the reaction wheels. This value is defaulted back
          to zero at each step.
    - name: "{prefix}.{satellite}.wheels.w"
      type: Initialized Vector3
      comment: >
          Angular rate of the reactions wheels.
    - name: "{prefix}.{satellite}.magnetourquers.m"
      type: Writable Vector3
      comment: >
          Magnetic moment commanded of the magnetic torque rods. This value is
          defaulted back to zero at each step.

gets:
    - name: "{prefix}.dt.s"
      type: Real
      comment: >
          Timestep of the simulation in seconds.
